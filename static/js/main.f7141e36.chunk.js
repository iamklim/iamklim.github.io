(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/empty-poster.b9aba793.png"},,,function(e,t,a){e.exports=a.p+"static/media/emojii-facepalm.60420728.png"},,,,function(e,t,a){e.exports=a(36)},,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),i=a.n(c),s=(a(20),a(1)),o=a(37),l=a(2),m=a.n(l),u=a(3),d=function(){var e=Object(u.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"GET"});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",console.error("Ajax request error:",e.t0));case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),p="3b07521ea25bf66106a9525b3054c8e9",_=function(e,t,a,n,r){var c="region=".concat(e),i="language=".concat(t),o="api_key=".concat(p),l="".concat("https://api.themoviedb.org/3/movie/now_playing","?").concat(c,"&").concat(i,"&").concat(o);Promise.all([d(l),d("".concat(l,"&page=2"))]).then(function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1],r=a.results,c=n.results,i=r.concat(c);return i.length>39&&(i.length=39),i.forEach(function(e){e.poster_path&&(e.poster="https://image.tmdb.org/t/p/original"+e.poster_path)}),i}).then(function(e){e.length?(a(e),n(!0)):(n(!1),r(!0))}).catch(function(){n(!1),r(!0)})},f=function(){var e=Object(u.a)(m.a.mark(function e(t,a,n,r){var c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.map(function(){var e=Object(u.a)(m.a.mark(function e(t){var n,r,c,i,s,o,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.themoviedb.org/3/movie",n=t.id,r="api_key=".concat(p),c="language=".concat(a),"append_to_response=external_ids,videos",i="".concat("https://api.themoviedb.org/3/movie","/").concat(n,"?").concat(r,"&").concat(c,"&").concat("append_to_response=external_ids,videos"),e.next=8,d(i);case 8:return s=e.sent,(o=s.videos.results).length>0&&"YouTube"===(l=o[o.length-1]).site&&(t.trailerId=l.key),t.imdb_id=s.imdb_id,t.genres=s.genres.length?s.genres:null,e.abrupt("return",t);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return c=e.sent,e.next=5,Promise.all(c).then(function(e){n(e)}).then(function(){r(!0)});case 5:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(m.a.mark(function e(t,a,n){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.map(function(){var e=Object(u.a)(m.a.mark(function e(t){var a,n,r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://www.omdbapi.com",a="i=".concat(t.imdb_id),n="apikey=".concat("55018c43"),r="".concat("https://www.omdbapi.com","/?").concat(a,"&").concat(n),e.next=6,d(r);case 6:return c=e.sent,t.imdbRating=isNaN(c.imdbRating)?"-":c.imdbRating,t.metascore=isNaN(c.Metascore)?null:c.Metascore,t.year=isNaN(c.Year)?null:c.Year,t.director="N/A"!==c.Director?c.Director:null,t.actors="N/A"!==c.Actors?c.Actors:null,e.abrupt("return",t);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return r=e.sent,e.next=5,Promise.all(r).then(function(e){a(e)}).then(function(){n(!0)});case 5:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),v=function(e){return[].concat(e).sort(function(e,t){return e.imdbRating>t.imdbRating?-1:1})},E=(a(22),function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader__spinner"},r.a.createElement("div",{className:"loader__spinner-square"})))}),g=a(11),h=(a(23),a(24),a(25),a(7)),w=a.n(h),N=function(e){var t=e.movie,a=e.setShowPopup,n=e.setCurrTrailerId,c=t.genres,i=t.poster,s=t.title,o=t.year,l=t.imdbRating,m=t.metascore,u=t.trailerId,d=t.director,p=t.actors,_=t.overview,f=c?r.a.createElement(r.a.Fragment,null,c.map(function(e){var t=e.id,a=e.name;return r.a.createElement("div",{key:t,className:"item__genre-element"},r.a.createElement("div",{className:"item__genre-icon item__genre-icon--".concat(t)}),r.a.createElement("div",{className:"item__genre-name"},a))})):null,b=i||w.a,v=o?"(".concat(o,")"):"";return r.a.createElement("div",{className:"swiper-slide item"},r.a.createElement("div",{className:"item__description item__title"},r.a.createElement("span",null,"".concat(s," ").concat(v))),r.a.createElement("div",{className:"item__img"},r.a.createElement("img",{src:b,alt:"Poster"}),r.a.createElement("div",{className:"item__shadow item__shadow--left"}),r.a.createElement("div",{className:"item__shadow item__shadow--right"}),r.a.createElement("div",{className:"item__description item__marks"},r.a.createElement("div",{className:" item__sidebar item__sidebar--imdb"},r.a.createElement("span",{className:"item__sidebar-title"},"IMDb"),r.a.createElement("span",{className:"item__sidebar-number"},l)),m&&r.a.createElement("div",{className:"item__sidebar item__sidebar--metascore"},r.a.createElement("span",{className:"item__sidebar-title item__sidebar-title--sm"},"\u041a\u0440\u0438\u0442\u0438\u043a\u0438"),r.a.createElement("span",{className:"item__sidebar-number"},"".concat(m,"%"))),u&&r.a.createElement("div",{className:"item__sidebar item__sidebar--trailer"},r.a.createElement("span",{className:"item__sidebar-title item__sidebar-title--sm"},"\u0422\u0440\u0435\u0439\u043b\u0435\u0440"),r.a.createElement("span",{className:"item__sidebar-icon item__sidebar-icon--youtube"}),r.a.createElement("a",{className:"item__sidebar-link","data-trailer-id":u,href:"https://www.youtube.com/watch?v=".concat(u),onClick:function(e){e.preventDefault();var t=e.target.getAttribute("data-trailer-id");n(t),a(!0)}},"Youtube")),f&&r.a.createElement("div",{className:"item__genre"},r.a.createElement("div",{className:"item__sidebar item__genre-box item__genre-box--sm"},f),r.a.createElement("div",{className:"item__sidebar item__genre-box item__genre-box--lg"},f)))),r.a.createElement("div",{className:"item__description item__bottom"},r.a.createElement("div",{className:"item__cast"},d&&r.a.createElement("span",{className:"item__director"},"\u0420\u0435\u0436\u0438\u0441\u0441\u0435\u0440: ",r.a.createElement("span",null,d)),p&&r.a.createElement("span",{className:"item__actors"},"\u0412 \u0440\u043e\u043b\u044f\u0445: ",r.a.createElement("span",null,p))),r.a.createElement("div",{className:"item__overview"},r.a.createElement("span",null,_))))},O=(a(26),a(27),function(e){var t=e.id;Object(n.useEffect)(function(){if(window.YT)a();else{var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=a;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},[]);var a=function(){new window.YT.Player("youtube-player-".concat(t),{videoId:t,height:"100%",width:"100%",autoplay:1,modestbranding:1,rel:0,showinfo:0,playsinline:1,events:{onReady:c}})},c=function(e){e.target.setVolume(100),e.target.playVideo()};return r.a.createElement("div",{id:"youtube-player-".concat(t)})}),j=function(e){var t=e.currTrailerUrl,a=e.setShowPopup,c=Object(n.useRef)();return r.a.createElement("div",{className:"video-popup",onClick:function(e){c.current.contains(e.target)||a(!1)}},r.a.createElement("span",{className:"video-popup__content",ref:c},r.a.createElement("div",{className:"video-popup__media"},r.a.createElement(O,{id:t}))))},y=function(e){var t=e.movies,a=e.moviesAreSorted,c=e.onInit,i=Object(n.useState)(!1),l=Object(s.a)(i,2),m=l[0],u=l[1],d=Object(n.useState)(""),p=Object(s.a)(d,2),_=p[0],f=p[1];return Object(n.useEffect)(function(){a&&new g.a(".swiper-container",{effect:"coverflow",centeredSlides:!0,slidesPerView:"auto",mousewheel:{eventsTarged:".item__img"},keyboard:!0,slideToClickedSlide:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0},coverflowEffect:{rotate:20,stretch:0,depth:100,modifier:1,slideShadows:!1},on:{init:function(){c(!0)}}})},[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"swiper-container"},r.a.createElement("div",{className:"swiper-scrollbar"}),r.a.createElement("div",{className:"swiper-wrapper"},a&&t.map(function(e){return r.a.createElement(N,{key:e.id,movie:e,setShowPopup:u,setCurrTrailerId:f})}))),r.a.createElement(o.a,{in:m&&_.length>0,timeout:500,classNames:"animation",mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(j,{currTrailerUrl:_,setShowPopup:u})))},k=(a(32),a(10)),x=a.n(k),S=function(){return r.a.createElement("div",{className:"error-fallback"},r.a.createElement("div",{className:"error-fallback__content"},r.a.createElement("span",{className:"error-fallback__content-text"},"\u0427\u0442\u043e-\u0442\u043e \u043d\u0435 \u0437\u0430\u0432\u0435\u043b\u043e\u0441\u044c ",r.a.createElement("img",{src:x.a,className:"error-fallback__content-icon",alt:"Error icon"})),r.a.createElement("span",{className:"error-fallback__content-text"},"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")))},I=(a(33),a(34),a(35),function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),l=Object(s.a)(i,2),m=l[0],u=l[1],d=Object(n.useState)(!1),p=Object(s.a)(d,2),g=p[0],h=p[1],w=Object(n.useState)(!1),N=Object(s.a)(w,2),O=N[0],j=N[1],k=Object(n.useState)(!1),x=Object(s.a)(k,2),I=x[0],T=x[1],P=Object(n.useState)(!1),A=Object(s.a)(P,2),R=A[0],Y=A[1],C=Object(n.useState)(!1),D=Object(s.a)(C,2),M=D[0],V=D[1],B=Object(n.useState)(!1),F=Object(s.a)(B,2),U=F[0],q=F[1],J=Object(n.useState)("UA"),G=Object(s.a)(J,2),K=G[0],z=(G[1],Object(n.useState)("ru")),H=Object(s.a)(z,2),L=H[0],Q=(H[1],Object(n.useRef)(!1));return Object(n.useEffect)(function(){_(K,L,c,u,V)},[]),Object(n.useEffect)(function(){Q.current?(V(!1),q(!1),c([]),u(!1),h(!1),j(!1),T(!1),Y(!1),_(K,L,c,u,V)):Q.current=!0},[K,L]),Object(n.useEffect)(function(){m&&a.length&&f(a,L,c,h)},[m]),Object(n.useEffect)(function(){g&&a.length&&b(a,c,j)},[g]),Object(n.useEffect)(function(){if(O&&a.length){var e=v(a);c(e),T(!0)}},[O]),Object(n.useEffect)(function(){R&&a.length&&(q(!0),V(!0))},[R]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content ".concat(U&&M?"content--visible":"")},r.a.createElement("div",{className:"content__credentials"},r.a.createElement("p",null,"Made by Vladyslav Klymenko"),r.a.createElement("a",{href:"https://www.linkedin.com/in/vladklymenko/"},"linkedIn"),"\xa0",r.a.createElement("a",{href:"mailto:drkleem@gmail.com"},"drkleem@gmail.com")),r.a.createElement(y,{movies:a,moviesAreSorted:I,onInit:Y})),r.a.createElement(o.a,{in:!U&&!M,timeout:500,classNames:"animation",unmountOnExit:!0},r.a.createElement(E,null)),r.a.createElement(o.a,{in:!U&&M,timeout:500,classNames:"animation",mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(S,null)))});i.a.render(r.a.createElement(I,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.f7141e36.chunk.js.map